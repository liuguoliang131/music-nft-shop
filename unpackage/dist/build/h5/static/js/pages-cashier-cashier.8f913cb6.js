(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-cashier-cashier"],{"09c9":function(e,t,n){e.exports=n.p+"static/img/wx.c95ab56d.png"},"1fb6":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAVPSURBVHgB7Zs7d9NmGMf/kuP40pvmLjVTx8SfIKEfANKlS4ea06WdgKUbB+ewdWkywdKTMHQmsHQj5hPYgYkJszCLE0iMLxLP81oKsqy7XslSTn7nOLbeyLb08/O8N70CrrjCiYKc6Guaho9ooYJN2mypCjRTwXfiIEy8N0zo9HJoP9ojfYgcyUyEOPERdhQVW3Si21TUQjx0OrieaeLIAF5kLUa6iH5d264ouG9CnLw0LCmHGyP9MTJAmohXTe0+hXcH8X/5uAwprQ6nBh7LjJLUIjgC6MAOkL0AN0OY6MqKkMQiSECLUuBAdgokYEiReD1tdKhIQL+p7VAU9AsggeEW6A2nJlIQW8QJfaFq4gm91FAgKCq6LxvaP0hIrNTgL6IouIMio2BgrFOq6Loe720RednUDsx5q1B8EsiIlBoiEsoigTGxqY5xLDp1EQkVwXVC4dPBC5JRGSNynRGYGqJ1mFeMpYW653fb5/pe2H6+IrifQM3SMfLvKEnHmKLdnuiDoH3UgH90cQkkMOpaeFR7iqBo6FCs/IbLQ+ukrnWDdvBMjZOG9gaXJBoc6EYN1/ya1KWIENFQMgnPp5Mou2nqyL/1WxJBFWSqPnve/D05x93JRzycjMJ3VnDbr2+xIIKH1ChRNDyik/9v+mn+ejqKIsM3KlTXRgclgSU8nC6eOMt4PgtOE0XBllf5YmoouIkS4CWBuV6p4id6BMFTB1bkL3AhgnuRKNjQ2gtOBS8JPyoVPKg2o3wEn/S2R5mFWYhJlkCeTceicnTzPU2V/1v7Gt8o0QbTXumhOl5socC8Nme4NzlbKo8rgaH02HSXOeuITRQUlvD7pw9L5bYEfo6J1q9qC+crPqH/lVZYCe9MQ0g4pQkRJykkzKlgWQRmxawk/SRwGqSSMKfl3FC9CqPCB/rL6BSvjRlkY0vgZyeSJIDe/oNzO7EI+0BF/o4/SJXhJ4FhCdxUyiaRVveBcujKkiE+y0fCg/VmJhKYRCJOqQHix0KZBBlBEv6qNnCjso6sSCSCfxWvtjutDO4ncKq5+aNax69rNWSJLWKImMiWcW98hmOPARNL+HOtDtnw4hTntmr9jXVVyEaWDO42P5uNl8qzksBYK3QumIswMEBC0spwzik44VTISgJTMdB3bgsRaS+pJ5XhN5y+sbYuKscsmZl469x2VpaJo4KJKyNoTiHqcDoN7uscFyJ4wRZSElWGjDmFNFBF2XOXOecjjiCBMBk8ryhjTiENMwVP3WVfRNRFaiRqPdwEyXjkEQl5ShBMAyKCL3xQk/IUkvCT4Sb1cDo+Q6/roO5vP4REwmSsQAJXAV2v4oUjoGa0RyOIHiTiJ0PWcDomul+jsHQUlMbSV7a6ZaxIAkwFR359plwvAttzj1nNKYQQuB7T8yehN9xCBvDJ/1/7dhUSuG4IXLLsW6UPGtoT+ucOLgfDjXP9WtAOvklq1kRUSOlXrBpOibB9fEVY/YqfUXZM7EYZVAZW29yckoxdlJf9jZHejbJjpD5tv6HtkbHbKBMKBhtnejvq7pEa8va5fgcZ9C8yw1qCHOctkXs0FGId6pXto+gkXJQeq2vHkVHoOoOiNokEJtG411qazOucWygIUZca+5HqViZ66qqrXpjKqTDBrbAlxuEfkxJel2ktSWwhX3gkuZsmCpxImxLKUQh39PZpRm0vSV3gRxY3wHZocvQmjbCljlNoeqCn8F3BDRo8SRRgk90t0fM6ZJsf6nzxVgvx0OlacI/vAM7q5J3kNFt6ca+4uEHeevCXi8UaNGHyHvZN8nz5ka685X2T/BVXLPIZTySLghwvrNgAAAAASUVORK5CYII="},"209f":function(e,t,n){"use strict";n.r(t);var i=n("c695"),a=n("a982");for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("d0d4");var r,c=n("f0c5"),s=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"5b1cb944",null,!1,i["a"],r);t["default"]=s.exports},a982:function(e,t,n){"use strict";n.r(t);var i=n("cc28"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},c695:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={wybPopup:n("1754").default},a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"container"},[i("cu-head"),i("v-uni-view",{staticClass:"box1"},[i("v-uni-view",{staticClass:"price"},[i("v-uni-text",{staticClass:"rmb"},[e._v("￥")]),i("v-uni-text",{staticClass:"count"},[e._v(e._s(e.order_price))])],1),i("v-uni-view",{staticClass:"time"},[i("v-uni-text",{staticClass:"time-text"},[e._v("剩余支付时间")]),i("v-uni-text",{staticClass:"time-count"},[e._v(e._s(e.displayTime))])],1)],1),i("v-uni-view",{staticClass:"box2"},[e._l(e.list,(function(t,a){return i("v-uni-view",{key:t.pay_id,staticClass:"box2-item"},[2===t.pay_id||4===t.pay_id?i("v-uni-image",{staticClass:"icon",attrs:{src:n("09c9")}}):e._e(),i("v-uni-view",{staticClass:"text"},[e._v(e._s(t.pay_name))]),i("v-uni-view",{staticClass:"radio",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handSelect(a)}}},[i("v-uni-image",{directives:[{name:"show",rawName:"v-show",value:t.checked,expression:"item.checked"}],staticClass:"checked",attrs:{src:n("1fb6")}}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.checked,expression:"!item.checked"}],staticClass:"nocheck"})],1)],1)})),i("v-uni-view",{staticClass:"empty-cell"})],2),i("v-uni-view",{staticClass:"box3"},[i("v-uni-view",{staticClass:"submit",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handPay()}}},[e._v("立即支付")])],1),i("wyb-popup",{ref:"popup",attrs:{type:"bottom",height:"701",width:"750",radius:"6",bgColor:"#1D1D1D",showCloseIcon:!0}},[i("v-uni-view",{staticClass:"popup-content"},[i("v-uni-view",{staticClass:"password"},[i("v-uni-input",{attrs:{type:"text"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),i("v-uni-view",{staticClass:"confirm",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.balancePay.apply(void 0,arguments)}}},[e._v("确认支付")])],1)],1)],1)},o=[]},cc28:function(e,t,n){"use strict";var i=n("4ea4");n("99af"),n("7db0"),n("4160"),n("a9e3"),n("e25e"),n("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var a=i(n("1da1")),o=n("173f"),r=n("1a64"),c=i(n("aed0")),s=n("df47"),u=i(n("b53b")),d=i(n("1754")),l={data:function(){return{timer:null,product_item_id:"",count_down:"",order_no:"",order_price:"",displayTime:"",list:[],listenTimer:null,password:""}},components:{CuHead:c.default,WybPopup:d.default},methods:{handleBack:function(){var e=getCurrentPages();console.log(e),1===e.length?uni.redirectTo({url:"/pages/index/index"}):uni.navigateBack({delta:1})},getOrderResult:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$post(o.h5_conllections_buy_result,{order_no:e.order_no});case 3:if(n=t.sent,0===n.code){t.next=6;break}return t.abrupt("return",uni.showToast({title:n.msg,icon:"error"}));case 6:e.order_no=n.data.order_no,e.order_price=n.data.order_price||n.data.amount,e.count_down=n.data.count_down,e.startCountDown(),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0),uni.showToast({title:t.t0.message,icon:"error"});case 16:case"end":return t.stop()}}),t,null,[[0,12]])})))()},startCountDown:function(){var e=this;this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){if(e.count_down<=1)clearInterval(e.timer),uni.showToast({title:"订单已失效请重新下单，即将为您返回到详情页",mask:!0,duration:3e3}),setTimeout((function(){var e=getCurrentPages();console.log(e),1===e.length?uni.redirectTo({url:"/pages/index/index"}):uni.navigateBack({delta:2})}),3e3);else{e.count_down--;var t=parseInt(e.count_down/60),n=parseInt(e.count_down%60);t=t<10?"0"+t:t,n=n<10?"0"+n:n,e.displayTime=t+":"+n}}),1e3)},getPayType:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$post(o.h5_conllections_buy_pay_type_list,{module_type:1});case 3:if(n=t.sent,0===n.code){t.next=6;break}return t.abrupt("return",uni.showToast({title:n.msg,icon:"error"}));case 6:n.data.forEach((function(e,t){e.checked=!t})),e.list=n.data||[],t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),uni.showToast({title:error.message,icon:"error"});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},handSelect:function(e){this.list.forEach((function(e){return e.checked=!1})),this.list[e].checked=!0},wxPay:function(e){var t=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var i,a,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,i=(0,s.isWxBrowser)()?"js":"h5",a={order_no:t.order_no,pay_id:e,pay_type:i,open_id:(0,s.getOpenId)()||""},n.next=5,t.$post(o.h5_conllections_buy_pay,a);case 5:if(r=n.sent,0===r.code){n.next=8;break}return n.abrupt("return",uni.showToast({title:r.msg,icon:"error"}));case 8:console.log("pay"),"js"===i?(c=r.data.wx_pay_param,c.packageNew=c.package,t.paymentFn(c)):window.location.href=r.data.wx_pay_param.pay_string,n.next=16;break;case 12:n.prev=12,n.t0=n["catch"](0),console.log(n.t0),uni.showToast({title:n.t0.message,icon:"error"});case 16:case"end":return n.stop()}}),n,null,[[0,12]])})))()},paymentFn:function(e){e.prepay_id;var t=e.app_id,n=e.time_stamp,i=e.nonce_str,a=e.packageNew,o=e.sign,r=e.sign_type;function c(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t,timeStamp:n,nonceStr:i,package:a,signType:r,paySign:o},(function(e){"get_brand_wcpay_request:ok"==e.err_msg&&uni.showToast({title:"支付成功",icon:"success"}),"get_brand_wcpay_request:cancel"==e.err_msg&&uni.showToast({title:"支付取消",icon:"none"}),"get_brand_wcpay_request:fail"==e.err_msg&&uni.showToast({title:"支付失败",icon:"error"}),"调用支付JSAPI缺少参数：total_fee"==e.err_msg&&uni.showToast({title:"调用支付JSAPI缺少参数：total_fee",icon:"error"})}))}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",c,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",c),document.attachEvent("onWeixinJSBridgeReady",c)):c()},balancePay:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n={order_no:e.order_no,module_type:1,password:(0,u.default)(e.password)},t.next=4,e.$post(o.h5_collections_wallet_pay_wallet,n);case 4:if(i=t.sent,0===i.code){t.next=7;break}return t.abrupt("return",uni.showToast({title:i.msg,icon:"error"}));case 7:uni.showToast({title:"支付成功",icon:"success"}),e.$refs.popup.close(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),uni.showToast({title:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},handPay:function(){try{var e=this.list.find((function(e){return e.checked})).pay_id;2===e?this.wxPay(e):4===e&&this.$refs.popup.show()}catch(t){}},listenPaySuccess:function(){var e=this;clearTimeout(this.listenTimer),this.listenTimer=setInterval((function(){(0,r.post1)(o.h5_conllections_buy_showsuccess,{order_no:e.order_no}).then((function(t){200===t.code?(clearTimeout(e.timer),clearTimeout(e.listenTimer),uni.redirectTo({url:"/pages/paySuccess/paySuccess?order_no=".concat(e.order_no,"&order_price=").concat(e.order_price,"&product_item_id=").concat(e.product_item_id,"&order_id=").concat(t.data.order_id)})):0!==t.code&&200!==t.code&&(uni.showToast({title:t.msg,icon:"none"}),clearTimeout(e.listenTimer))})).catch((function(t){clearTimeout(e.listenTimer),uni.showToast({icon:"error",title:res.message})}))}),1e3)}},onLoad:function(e){this.product_item_id=Number(e.product_item_id),this.order_no=e.order_no,this.order_price=e.order_price,this.getOrderResult(),this.getPayType()},onShow:function(){this.listenPaySuccess()},onHide:function(){clearTimeout(this.listenTimer)},beforeDestroy:function(){clearTimeout(this.timer),clearTimeout(this.listenTimer)}};t.default=l},d0d4:function(e,t,n){"use strict";var i=n("f096"),a=n.n(i);a.a},d341:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */.container[data-v-5b1cb944]{padding:0}.container .box1[data-v-5b1cb944]{height:%?400?%;text-align:center}.container .box1 .price[data-v-5b1cb944]{padding-top:%?150?%;height:%?100?%;color:#d10910;line-height:%?100?%}.container .box1 .price .rmb[data-v-5b1cb944]{font-size:%?44?%}.container .box1 .price .count[data-v-5b1cb944]{font-size:%?58?%;font-weight:600}.container .box1 .time[data-v-5b1cb944]{font-size:%?28?%;line-height:%?40?%;\n  /* identical to box height */text-align:center;color:#aeaeae}.container .box1 .time .time-count[data-v-5b1cb944]{margin-left:%?8?%}.container .box2[data-v-5b1cb944]{border-top:%?1?% solid #363636;overflow-y:scroll;height:%?800?%}.container .box2 .empty-cell[data-v-5b1cb944]{height:%?240?%}.container .box2 .box2-item[data-v-5b1cb944]{display:flex;align-items:center;height:%?100?%;padding:0 %?30?%;border-bottom:%?1?% solid #363636}.container .box2 .box2-item .icon[data-v-5b1cb944]{width:%?54?%;height:%?54?%}.container .box2 .box2-item .text[data-v-5b1cb944]{flex:1;margin-left:%?20?%;margin-right:%?20?%}.container .box2 .box2-item .radio[data-v-5b1cb944]{position:relative;width:%?44?%;height:%?44?%}.container .box2 .box2-item .radio .nocheck[data-v-5b1cb944]{width:%?40?%;height:%?40?%;border-radius:%?22?%;border:%?2?% solid #363636}.container .box2 .box2-item .radio .checked[data-v-5b1cb944]{position:absolute;top:%?0?%;left:%?0?%;width:%?44?%;height:%?44?%}.container .box3[data-v-5b1cb944]{position:fixed;bottom:%?140?%;left:0;width:100%;text-align:center}.container .box3 .submit[data-v-5b1cb944]{display:flex;align-items:center;justify-content:center;line-height:0;margin:auto;background:#d10910;border-radius:48px;height:%?96?%;width:%?474?%;font-weight:500;font-size:%?32?%}.container .box3 .submit[data-v-5b1cb944]:active{background-color:rgba(209,9,16,.6);color:#868686}.container[data-v-5b1cb944] .icon-close{font-size:%?36?%}.container[data-v-5b1cb944] .wyb-popup-box{z-index:998!important}.container[data-v-5b1cb944] .wyb-popup-mask{z-index:997!important}.container .popup-content[data-v-5b1cb944]{text-align:center}.container .popup-content .password[data-v-5b1cb944]{margin-top:%?200?%;height:%?100?%;border-radius:%?10?%;border:%?1?% solid #9acd32}.container .popup-content .confirm[data-v-5b1cb944]{background-color:rgba(209,9,16,.6);border-radius:%?10?%;width:%?300?%;height:%?100?%;text-align:center;line-height:%?100?%;margin:%?30?% auto 0 auto}',""]),e.exports=t},f096:function(e,t,n){var i=n("d341");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("ce75e9b2",i,!0,{sourceMap:!1,shadowMode:!1})}}]);