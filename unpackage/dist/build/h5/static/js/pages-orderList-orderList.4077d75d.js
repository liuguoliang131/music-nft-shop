(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-orderList-orderList"],{"0057":function(t,e,a){t.exports=a.p+"static/img/SR.79d31795.png"},"0c15":function(t,e,a){"use strict";a.r(e);var i=a("bafa"),n=a("85a0");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("33c3");var r,s=a("f0c5"),d=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"50a826ba",null,!1,i["a"],r);e["default"]=d.exports},"0f5e":function(t,e,a){var i=a("a847");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("71754fcd",i,!0,{sourceMap:!1,shadowMode:!1})},"21de":function(t,e,a){"use strict";a("c740"),a("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"myTab",props:{slide:{default:!0,description:"是否让横向滑动"},list:{default:function(){return[]},type:Array},activeBar:{type:Number,required:!0}},data:function(){return{}},watch:{activeBar:{handler:function(t){var e=this.list.findIndex((function(e,a){return e.id===t}));this.$refs.contentBlock.$el.style.left=-e*this.$refs.myTab.$el.offsetWidth+"px"}}},methods:{init:function(){console.log(this.$refs.myTab)},handActive:function(t){this.$emit("active",t.id)}}};e.default=i},2649:function(t,e,a){"use strict";a.r(e);var i=a("6a03"),n=a("bedf");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("a619");var r,s=a("f0c5"),d=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"375d630a",null,!1,i["a"],r);e["default"]=d.exports},"33c3":function(t,e,a){"use strict";var i=a("aabf"),n=a.n(i);n.a},"6a03":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{ref:"myTab",staticClass:"mytab"},[a("v-uni-view",{class:[t.slide?"tab-window":"noSlide"]},[a("v-uni-view",{staticClass:"bar"},t._l(t.list,(function(e){return a("v-uni-view",{key:e.id,class:["bar-item",t.activeBar===e.id?"bar-active":""],on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handActive(e)}}},[t._v(t._s(e.name)),a("v-uni-view",{staticClass:"line"})],1)})),1)],1),a("v-uni-view",{staticClass:"content-widow"},[a("v-uni-view",{ref:"contentBlock",staticClass:"content-block"},t._l(t.list,(function(e){return a("v-uni-view",{key:e.id,staticClass:"content-item"},[t._t("item",null,{data:e})],2)})),1)],1)],1)},o=[]},"85a0":function(t,e,a){"use strict";a.r(e);var i=a("f0e3"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},a619:function(t,e,a){"use strict";var i=a("0f5e"),n=a.n(i);n.a},a847:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */.mytab[data-v-375d630a]{width:%?750?%}.mytab .tab-window[data-v-375d630a]{width:%?750?%;height:%?80?%;display:-webkit-box;overflow-x:scroll}.mytab .tab-window[data-v-375d630a]::-webkit-scrollbar{display:none}.mytab .tab-window .bar[data-v-375d630a]{height:100%;display:flex;align-items:center}.mytab .tab-window .bar .bar-item[data-v-375d630a]{position:relative;height:100%;width:%?187.5?%;display:flex;align-items:center;justify-content:center;font-family:PingFang SC;font-style:normal;font-weight:400;font-size:%?28?%;color:#aeaeae;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.mytab .tab-window .bar .bar-item .line[data-v-375d630a]{position:absolute;bottom:%?0?%;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);width:%?60?%;height:%?6?%;border-radius:%?2?%;opacity:0;background-color:#c8a964;transition:all .5s}.mytab .tab-window .bar .bar-active[data-v-375d630a]{color:#c8a964;font-weight:600}.mytab .tab-window .bar .bar-active .line[data-v-375d630a]{opacity:1}.mytab .noSlide[data-v-375d630a]{width:%?750?%;height:%?80?%}.mytab .noSlide .bar[data-v-375d630a]{box-sizing:border-box;width:100%;height:100%;display:flex;align-items:center;justify-content:space-between}.mytab .noSlide .bar .bar-item[data-v-375d630a]{position:relative;height:100%;max-width:%?187.5?%;display:flex;align-items:center;justify-content:center;font-family:PingFang SC;font-style:normal;font-weight:400;font-size:%?28?%;color:#aeaeae;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.mytab .noSlide .bar .bar-item .line[data-v-375d630a]{position:absolute;bottom:%?0?%;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);width:%?60?%;height:%?6?%;border-radius:%?3?%;opacity:0;background-color:#c8a964;transition:all .5s}.mytab .noSlide .bar .bar-active[data-v-375d630a]{color:#c8a964;font-weight:600}.mytab .noSlide .bar .bar-active .line[data-v-375d630a]{opacity:1}.mytab .content-widow[data-v-375d630a]{width:%?750?%;position:relative}.mytab .content-widow .content-block[data-v-375d630a]{position:absolute;top:0;left:0;width:%?750?%;display:flex;transition:all .5s}.mytab .content-widow .content-block .content-item[data-v-375d630a]{width:100%}',""]),t.exports=e},aabf:function(t,e,a){var i=a("d289");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("7d69d5ef",i,!0,{sourceMap:!1,shadowMode:!1})},bafa:function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container order"},[i("nav-head",{attrs:{title:"我的订单"}}),i("my-tab",{attrs:{list:t.tabList,activeBar:t.activeBar,slide:!1},on:{active:function(e){arguments[0]=e=t.$handleEvent(e),t.handActive.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"order-nav"},t._l(t.navList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"order-nav-item",class:a===t.activeNav?"active":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClickNavItem(a)}}},[t._v(t._s(e))])})),1),t.isFinish&&0===t.list.length?i("v-uni-view",{class:["empty"]},[i("v-uni-view",{staticClass:"empty-center"},[i("v-uni-image",{staticClass:"empty-img",attrs:{src:"https://file.yuanyinfu.com/front-end-lib/empty-icon.png",mode:""}}),i("v-uni-view",{staticClass:"empty-text"},[t._v("还没有相关订单")])],1)],1):i("my-scroll",{class:["scroll-box"],attrs:{isFinish:t.isFinish,loading:t.loading},on:{load:function(e){arguments[0]=e=t.$handleEvent(e),t.getList.apply(void 0,arguments)}}},t._l(t.list,(function(e,n){return i("v-uni-view",{key:n,staticClass:"hasbox",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleGoToDetail(e,t.activeBar)}}},[i("v-uni-view",{staticClass:"order-body-item"},[i("v-uni-view",{staticClass:"order-body-item-imageBox"},[i("v-uni-view",{staticClass:"order-body-item-imageBox-image",style:"background-image:url("+(e.index_img||e.music_pic)+")"}),e.rare_type?i("v-uni-view",{staticClass:"order-body-item-imageBox-level"},["SSR"===e.rare_type?i("v-uni-image",{attrs:{src:"https://file.yuanyinfu.com/front-end-lib/SSR.png",mode:""}}):"UR"===e.rare_type?i("v-uni-image",{attrs:{src:"https://file.yuanyinfu.com/front-end-lib/UR.png",mode:""}}):"R"===e.rare_type?i("v-uni-image",{attrs:{src:"https://file.yuanyinfu.com/front-end-lib/R.png",mode:""}}):"SR"===e.rare_type?i("v-uni-image",{attrs:{src:a("0057"),mode:""}}):t._e()],1):t._e()],1),i("v-uni-view",{staticClass:"order-body-item-box"},[i("v-uni-view",{staticClass:"order-body-item-box-flex"},[i("v-uni-view",{staticClass:"order-body-item-title"},[t._v(t._s(e.name||e.music_name))]),i("v-uni-view",{staticClass:"order-body-item-type",staticStyle:{color:"#D10910","font-size":"28rpx","font-weight":"500"}},[t._v(t._s(t._f("filterStatus")(e.pay_status))),i("v-uni-text",{staticClass:"cuIcon-right"})],1)],1),i("v-uni-view",{staticClass:"order-body-item-box-flex"},[i("v-uni-view",{staticClass:"order-body-item-tag"},[t._v("包含"+t._s(e.singles_num||"1")+"首单曲")]),i("v-uni-view",{staticClass:"order-body-item-type",staticStyle:{"margin-top":"16rpx"}},[t._v("￥"+t._s(e.buy_price||e.order_price))])],1),i("v-uni-view",{staticClass:"order-body-item-box-flex"},[i("v-uni-view",{staticClass:"order-body-item-price",staticStyle:{"margin-left":"auto",color:"#666","font-size":"20rpx"}},[t._v("× "+t._s(e.buy_num||"1"))])],1),i("v-uni-view",{staticClass:"order-body-item-box-flex"},[i("v-uni-view",{staticClass:"order-body-item-price",staticStyle:{"margin-left":"auto",color:"#fff","margin-top":"10rpx"}},[t._v("实付金额 ￥"+t._s(e.order_price))])],1),0===e.pay_status?i("v-uni-view",{staticClass:"order-body-item-box-flex",staticStyle:{"margin-top":"20rpx"}},[i("v-uni-view",{staticStyle:{display:"flex","align-items":"center","margin-left":"auto","margin-top":"8rpx"}},[i("v-uni-button",{staticClass:"my-btn",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.handleClickCancle(e)}}},[t._v("取消订单")]),i("v-uni-button",{staticClass:"my-btn",staticStyle:{"border-color":"#C9A43D",color:"#C9A43D","margin-left":"10rpx"},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.handleGoCashier(e)}}},[t._v("去支付")])],1)],1):t._e()],1)],1),n!==t.list.length-1?i("v-uni-view",{staticClass:"splitline"}):t._e()],1)})),1)],1)},o=[]},bedf:function(t,e,a){"use strict";a.r(e);var i=a("21de"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},d289:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */.order[data-v-50a826ba]{padding:0;max-height:100vh}.order[data-v-50a826ba] .bar{padding:0 %?80?%}.order-nav[data-v-50a826ba]{box-sizing:border-box;width:%?750?%;height:%?70?%;padding:0 %?20?%;display:flex;align-items:center;justify-content:space-around}.order-nav-item[data-v-50a826ba]{font-family:PingFang SC;font-style:normal;font-weight:400;font-size:%?24?%;line-height:%?60?%;\n  /* identical to box height, or 200% */text-align:center;color:#777;height:%?60?%;padding-top:%?10?%}.order-nav-item.active[data-v-50a826ba]{color:#c8a964}.order .empty[data-v-50a826ba]{position:relative;box-sizing:border-box;padding:0 %?32?% %?32?% %?32?%;height:calc(100vh - %?238?%);text-align:center;overflow:hidden;padding-top:%?300?%}.order .empty .empty-center .empty-img[data-v-50a826ba]{width:%?120?%;height:%?120?%}.order .empty .empty-center .empty-text[data-v-50a826ba]{margin-top:%?44?%;font-size:%?24?%;line-height:%?34?%;\n  /* identical to box height */text-align:center;color:#cdcdcd}.order .scroll-box[data-v-50a826ba]{width:%?750?%;height:calc(100vh - %?238?%)}.order .h5-scroll[data-v-50a826ba]{height:calc(100vh - %?80?%)}.order .splitline[data-v-50a826ba]{width:%?542?%;height:1px;background-color:#343434;position:relative;left:%?208?%}.order .hasbox:nth-last-child(1) .splitline[data-v-50a826ba]{visibility:hidden}.order-body[data-v-50a826ba]{padding-top:%?20?%;width:%?750?%}.order-body-item[data-v-50a826ba]{padding:%?20?% %?40?%;display:flex;align-items:flex-start}.order-body-item-imageBox[data-v-50a826ba]{width:%?140?%;height:%?140?%;position:relative}.order-body-item-imageBox-image[data-v-50a826ba]{width:100%;height:100%;border-radius:%?24?%;background-size:cover;background-position:50%;background-repeat:no-repeat}.order-body-item-imageBox-level[data-v-50a826ba]{position:absolute;top:0;left:0;width:%?84?%;height:%?40?%}.order-body-item-imageBox-level uni-image[data-v-50a826ba]{width:100%;height:100%}.order-body-item-box[data-v-50a826ba]{display:flex;align-items:flex-start;flex-direction:column;justify-content:space-between;font-size:%?24?%;height:80%;padding-left:%?20?%;color:#8a8a8a;flex:auto}.order-body-item-box-flex[data-v-50a826ba]{display:flex;align-items:center;justify-content:space-between;width:100%}.order-body-item-title[data-v-50a826ba]{color:#fff;font-size:%?28?%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;width:calc(100vw - %?400?%)}.order .my-btn[data-v-50a826ba]{border:none;height:%?50?%;border-radius:%?50?%;padding:0 %?40?%;line-height:%?50?%;font-size:%?24?%;background-color:#0d0d0d;color:#aeaeae;border:%?1?% solid #666;display:flex;align-items:center;justify-content:center;font-weight:500}.center[data-v-50a826ba]{width:100%;height:%?200?%;display:flex;align-items:center;justify-content:center;font-size:%?28?%;color:#666}',""]),t.exports=e},f0e3:function(t,e,a){"use strict";var i=a("4ea4");a("99af"),a("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("ade3")),o=i(a("2909"));a("96cf");var r=i(a("1da1")),s=i(a("2649")),d=i(a("465b")),l=i(a("adff")),c=a("173f"),u=a("df47"),v=a("1a64"),f={components:{MyTab:s.default,MyScroll:d.default,NavHead:l.default},data:function(){return{tabList:[{name:"黄金单曲",id:1,activeNav:0,isFinish:!1,loading:!1,page:1,list:[]},{name:"黄金专辑",id:2,activeNav:0,isFinish:!1,loading:!1,page:1,list:[]},{name:"数字音乐",id:3,activeNav:0,isFinish:!1,loading:!1,page:1,list:[]}],activeBar:1,navList:["全部","待支付","已取消","已完成"],activeNav:0,isFinish:!1,loading:!1,page:1,list:[]}},created:function(){},onLoad:function(t){console.log("onload"),t.product_type&&(this.activeBar=Number(t.product_type))},onShow:function(){this.$store.state.publicState.refresh&&(this.initParams(),this.getList(),this.$store.commit("publicState/set_refresh",!1))},filters:{filterStatus:function(t){var e={0:"待支付",1:"已完成",2:"已取消",3:"已取消",4:"已取消",5:"已取消"};return e[t]}},methods:{initParams:function(){this.page=1,this.list=[],this.isFinish=!1,this.loading=!1},handActive:function(t){if(this.activeBar===t)return!1;this.activeBar=t,this.initParams(),this.getList()},getList:function(t){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,i,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=null,i=null,4===e.activeBar?(a=c.order_list,n=["","create","cancel","pay"],i={page:e.page++,type:n[e.activeNav]}):(a=c.order_collectionsList,i={page:e.page++,order_type:e.activeNav,product_type:e.activeBar}),t.prev=3,e.loading=!0,t.next=7,(0,v.post1)(a,i);case 7:if(r=t.sent,0===r.code){t.next=12;break}return e.isFinish=!0,e.loading=!1,t.abrupt("return",uni.showToast({title:r.msg,icon:"none"}));case 12:r.data.list&&Array.isArray(r.data.list)&&r.data.list.length?1===e.page?e.list=r.data.list:e.list=[].concat((0,o.default)(e.list),(0,o.default)(r.data.list)):(e.isFinish=!0,e.page=e.page-1),e.loading=!1,t.next=22;break;case 16:throw t.prev=16,t.t0=t["catch"](3),e.isFinish=!0,e.loading=!1,uni.showToast({title:t.t0.message,icon:"none"}),t.t0;case 22:case"end":return t.stop()}}),t,null,[[3,16]])})))()},handleClickNavItem:function(t){if(this.activeNav===t)return!1;this.activeNav=t,this.initParams(),this.getList()},handleGoToDetail:function(t,e){var a="/pages/orderDetail/orderDetail?id=".concat(t.order_id,"&product_type=").concat(e);uni.navigateTo({url:a})},handleClickCancle:function(t){var e,a=this;uni.showModal((e={title:"提示",confirmColor:"确认取消",cancelText:"返回"},(0,n.default)(e,"confirmColor","#DC2D1E"),(0,n.default)(e,"content","是否确认取消订单？"),(0,n.default)(e,"cancelColor","#999999"),(0,n.default)(e,"success",(function(e){e.confirm&&(0,v.post)(c.h5_order_cancle,{order_id:t.order_id}).then((function(t){uni.showToast({title:"取消成功"}),a.initParams(),a.getList()}))})),e))},handleGoCashier:function(t){if(this.$store.state.user.inApp)(0,u.openAppPage)({page:"diskConfirmOrderPage",isNeedLogin:!0,params:t});else{var e="/pages/cashier/cashier?product_item_id=".concat(t.product_item_id,"&order_no=").concat(t.order_no,"&order_price=").concat(t.order_total_price,"&order_id=").concat(t.order_id);uni.navigateTo({url:e})}}}};e.default=f}}]);