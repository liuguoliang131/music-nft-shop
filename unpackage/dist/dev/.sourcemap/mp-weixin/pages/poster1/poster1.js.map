{"version":3,"sources":["uni-app:///main.js","webpack:///D:/YuanYinFu/music-nft-shop/pages/poster1/poster1.vue?f551","webpack:///D:/YuanYinFu/music-nft-shop/pages/poster1/poster1.vue?af4e","webpack:///D:/YuanYinFu/music-nft-shop/pages/poster1/poster1.vue?d2e3","webpack:///D:/YuanYinFu/music-nft-shop/pages/poster1/poster1.vue?d8a0","uni-app:///pages/poster1/poster1.vue","webpack:///D:/YuanYinFu/music-nft-shop/pages/poster1/poster1.vue?7e61","webpack:///D:/YuanYinFu/music-nft-shop/pages/poster1/poster1.vue?35f1"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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","file":"pages/poster1/poster1.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/poster1/poster1.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./poster1.vue?vue&type=template&id=3c0953e0&\"\nvar renderjs\nimport script from \"./poster1.vue?vue&type=script&lang=js&\"\nexport * from \"./poster1.vue?vue&type=script&lang=js&\"\nimport style0 from \"./poster1.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/poster1/poster1.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster1.vue?vue&type=template&id=3c0953e0&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster1.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster1.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<cu-head></cu-head>\r\n\t\t<view class=\"content\">\r\n\t\t\t<view class=\"box1\">\r\n\t\t\t\t<image class=\"posterImageBase64\" v-if=\"posterImageBase64\" :src=\"posterImageBase64\" mode=\"\"></image>\r\n\t\t\t\t<canvas ref=\"Canvas\" class=\"thecanvas\" type=\"2d\" canvas-id=\"firstCanvas\"></canvas>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"box2\">\r\n\t\t\t\t<view v-if=\"isWx\" class=\"save noactive\">长按二维码保存海报</view>\r\n\t\t\t\t<view v-else class=\"save\" @tap=\"handleSavePhoto()\">点击保存海报到相册</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"box3\" v-show=\"inApp\">\r\n\t\t\t\t可分享至微信或朋友圈\r\n\t\t\t\t<image src=\"../../static/share-wx.png\" mode=\"\"></image>\r\n\t\t\t\t<image src=\"../../static/share-friends.png\" mode=\"\"></image>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport QRCode from 'qrcodejs2'\r\n\timport {\r\n\t\tisApp,\r\n\t\tisWxBrowser,\r\n\t\tsaveBase64Image\r\n\t} from '../../utils/index.js'\r\n\timport {\r\n\t\th5_community_sharePoster\r\n\t} from '../../request/api.js'\r\n\timport CuHead from '../../components/cu-head.vue'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisWx: false,\r\n\t\t\t\tinApp: false, //是否在app内\r\n\t\t\t\tcontext: null,\r\n\t\t\t\tposterImageBase64: ''\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tCuHead\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleBack() {\r\n\r\n\t\t\t\tlet currentRoutes = getCurrentPages(); // 获取当前打开过的页面路由数组\r\n\t\t\t\tconsole.log(currentRoutes)\r\n\t\t\t\tif (currentRoutes.length === 1) {\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\tdelta: 1, //返回层数，2则上上页\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 生成二维码函数\r\n\t\t\tgetQrcode(qWidth, qHeight, qText, qRender, dom) {\r\n\t\t\t\treturn new QRCode(dom, {\r\n\t\t\t\t\twidth: qWidth,\r\n\t\t\t\t\theight: qHeight,\r\n\t\t\t\t\ttext: qText,\r\n\t\t\t\t\trender: qRender,\r\n\t\t\t\t\tcorrectLevel: 1\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync downloadFile(imgSrc) {\r\n\t\t\t\treturn new Promise((resolve, errs) => {\r\n\t\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\t\tsrc: imgSrc,\r\n\t\t\t\t\t\tsuccess: function(image) {\r\n\t\t\t\t\t\t\tresolve(image.tempFilePath);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\terrs(err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\thandleSavePhoto() {\r\n\t\t\t\tconsole.log('save')\r\n\t\t\t\tuni.canvasToTempFilePath({ // res.tempFilePath临时路径\r\n\t\t\t\t\tcanvasId: 'firstCanvas',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('res', res)\r\n\t\t\t\t\t\tif (isApp()) {\r\n\t\t\t\t\t\t\tsaveBase64Image(res.tempFilePath)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst btn = document.createElement('a')\r\n\t\t\t\t\t\t\tbtn.download = '分享海报'\r\n\t\t\t\t\t\t\tbtn.href = res.tempFilePath\r\n\t\t\t\t\t\t\tbtn.click()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// uni.saveImageToPhotosAlbum({ // 保存本地\r\n\t\t\t\t\t\t// \tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t// \tsuccess: (response) => {\r\n\t\t\t\t\t\t// \t\tconsole.log(response, 'success');\r\n\t\t\t\t\t\t// \t},\r\n\t\t\t\t\t\t// \tfail: (response) => {}\r\n\t\t\t\t\t\t// })\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync getInfo() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst res = await this.$post(h5_community_sharePoster, {})\r\n\t\t\t\t\tif (res.code !== 0) {\r\n\t\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// const res = {\r\n\t\t\t\t\t// \tdata: {\r\n\t\t\t\t\t// \t\tuser_name: '窝里giao',\r\n\t\t\t\t\t// \t\tuser_avatar: 'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2F2020-10-20%2F5f8eace52a8ff.jpg&refer=http%3A%2F%2Fpic1.win4000.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1666683588&t=4296afb3ffe7983a07a9d16d8b3ccbbf',\r\n\t\t\t\t\t// \t\tposter_url: 'https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fup.enterdesk.com%2Fphoto%2F2011-5-29%2Fenterdesk.com-F65D26B61244263D3A0F77230BCB9F16.jpg&refer=http%3A%2F%2Fup.enterdesk.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1666675133&t=eec4a20e79b97c01f3804c90192c5dd1',\r\n\t\t\t\t\t// \t\tshare_sign: 'xasdasfasfadas'\r\n\t\t\t\t\t// \t}\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tthis.initCanvas(res.data)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t\tconsole.log('error', e)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\ttitle: e.message\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinitCanvas(data) {\r\n\t\t\t\tconst that = this\r\n\t\t\t\t// 获取父盒子宽度\r\n\r\n\t\t\t\tlet device = uni.getSystemInfo().then(res => {\r\n\t\t\t\t\tconsole.log('device', res[1])\r\n\t\t\t\t\tconst widowWidth = res[1].windowWidth //屏幕宽度\r\n\r\n\t\t\t\t\t// 参照比例\r\n\t\t\t\t\tconst scaleWidth = 315\r\n\t\t\t\t\tconst scaleScreenWidth = 375 //屏幕宽度\r\n\t\t\t\t\tconst scaleHeight = 387\r\n\t\t\t\t\tconst bg = {\r\n\t\t\t\t\t\turl: data.poster_url,\r\n\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\twidth: scaleWidth * widowWidth / scaleScreenWidth,\r\n\t\t\t\t\t\theight: scaleHeight * widowWidth / scaleScreenWidth,\r\n\t\t\t\t\t\tradius: 8 * widowWidth / scaleScreenWidth\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst ava = {\r\n\t\t\t\t\t\turl: data.user_avatar,\r\n\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\twidth: 0,\r\n\t\t\t\t\t\theight: 0\r\n\t\t\t\t\t} // 头像\r\n\t\t\t\t\tava.x = 12 * widowWidth / scaleScreenWidth\r\n\t\t\t\t\tava.y = 16 * widowWidth / scaleScreenWidth\r\n\t\t\t\t\tava.width = 30 * widowWidth / scaleScreenWidth\r\n\t\t\t\t\tava.height = 30 * widowWidth / scaleScreenWidth\r\n\t\t\t\t\t// 文本\r\n\t\t\t\t\tconst title = {\r\n\t\t\t\t\t\tx: 47 * widowWidth / scaleScreenWidth,\r\n\t\t\t\t\t\ty: 37 * widowWidth / scaleScreenWidth,\r\n\t\t\t\t\t\tfontSize: 16 * widowWidth / scaleScreenWidth,\r\n\t\t\t\t\t\tcolor: '#1C1C1E',\r\n\t\t\t\t\t\ttext: data.user_name\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst tips = {\r\n\t\t\t\t\t\tx: 121.5 * widowWidth / scaleScreenWidth,\r\n\t\t\t\t\t\ty: 358 * widowWidth / scaleScreenWidth,\r\n\t\t\t\t\t\tfontSize: 12 * widowWidth / scaleScreenWidth,\r\n\t\t\t\t\t\tcolor: '#1C1C1E',\r\n\t\t\t\t\t\ttext: '扫码开始试听'\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 二维码\r\n\t\t\t\t\tconst qr = {\r\n\t\t\t\t\t\tx: 97.5 * widowWidth / scaleScreenWidth,\r\n\t\t\t\t\t\ty: 218 * widowWidth / scaleScreenWidth,\r\n\t\t\t\t\t\twidth: 120 * widowWidth / scaleScreenWidth,\r\n\t\t\t\t\t\theight: 120 * widowWidth / scaleScreenWidth,\r\n\t\t\t\t\t\tshareUrl: window.location.protocol + '//' + window.location.host +\r\n\t\t\t\t\t\t\t`/#/pages/index/index?share_sign=${encodeURIComponent(data.share_sign)}`\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 生成二维码\r\n\t\t\t\t\tconst qrCanvas = document.createElement('div')\r\n\t\t\t\t\tqrCanvas.height = qr.height\r\n\t\t\t\t\tqrCanvas.width = qr.width\r\n\t\t\t\t\tconst qrcodeObj = that.getQrcode(qr.width, qr.height, qr.shareUrl,\r\n\t\t\t\t\t\t'canvas', qrCanvas)\r\n\t\t\t\t\tconst codeCanvas = qrcodeObj._el.querySelector('canvas')\r\n\t\t\t\t\tconst code2Url = codeCanvas.toDataURL('image/png')\r\n\t\t\t\t\tconsole.log('code2Url', code2Url)\r\n\r\n\r\n\t\t\t\t\tthat.context = uni.createCanvasContext('firstCanvas', that)\r\n\t\t\t\t\tconsole.log('that.context', that.context)\r\n\t\t\t\t\t// this.$refs.Canvas.style.borderRadius = bg.radius + 'px'\r\n\t\t\t\t\tconsole.log(that.$refs.Canvas)\r\n\r\n\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\turl: bg.url,\r\n\t\t\t\t\t\tsuccess(bgres) {\r\n\t\t\t\t\t\t\tthat.context.drawImage(bgres.tempFilePath, bg.x, bg.y, bg.width, bg.height)\r\n\t\t\t\t\t\t\tthat.context.setFontSize(title.fontSize) // 字号\r\n\t\t\t\t\t\t\tthat.context.setFillStyle('Roboto ' + title.color) // 字体颜色\r\n\t\t\t\t\t\t\tthat.context.fillText(title.text, title.x, title.y); // （文字，x，y）\r\n\t\t\t\t\t\t\t// tips\r\n\t\t\t\t\t\t\t// that.context.setFontSize(tips.fontSize) // 字号\r\n\t\t\t\t\t\t\t// that.context.setFillStyle(tips.color) // 字体颜色\r\n\t\t\t\t\t\t\t// that.context.fillText(tips.text, tips.x, tips.y); // （文字，x，y）\r\n\t\t\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\t\t\turl: code2Url,\r\n\t\t\t\t\t\t\t\tsuccess(code2res) {\r\n\t\t\t\t\t\t\t\t\tthat.context.drawImage(code2Url, qr.x,\r\n\t\t\t\t\t\t\t\t\t\tqr.y, qr.width,\r\n\t\t\t\t\t\t\t\t\t\tqr.height)\r\n\t\t\t\t\t\t\t\t\t// 创建完后绘制头像\r\n\t\t\t\t\t\t\t\t\tuni.downloadFile({\r\n\t\t\t\t\t\t\t\t\t\turl: ava.url,\r\n\t\t\t\t\t\t\t\t\t\tsuccess(avares) {\r\n\t\t\t\t\t\t\t\t\t\t\tthat.context.arc(ava.x + (ava.width / 2), ava\r\n\t\t\t\t\t\t\t\t\t\t\t\t.y + (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tava.height / 2),\r\n\t\t\t\t\t\t\t\t\t\t\t\tava.width /\r\n\t\t\t\t\t\t\t\t\t\t\t\t2, 0, Math.PI *\r\n\t\t\t\t\t\t\t\t\t\t\t\t2)\r\n\t\t\t\t\t\t\t\t\t\t\tthat.context.clip()\r\n\t\t\t\t\t\t\t\t\t\t\tthat.context.beginPath()\r\n\t\t\t\t\t\t\t\t\t\t\tthat.context.drawImage(avares.tempFilePath, ava\r\n\t\t\t\t\t\t\t\t\t\t\t\t.x,\r\n\t\t\t\t\t\t\t\t\t\t\t\tava.y, ava.width,\r\n\t\t\t\t\t\t\t\t\t\t\t\tava.height)\r\n\t\t\t\t\t\t\t\t\t\t\tthat.context.draw();\r\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t// 生成图片 在canvas加载完后生成图片到canvas层级之上\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.canvasToTempFilePath({ // res.tempFilePath临时路径\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcanvasId: 'firstCanvas',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tposterRes) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'posterRes',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tposterRes\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.posterImageBase64 =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tposterRes\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.tempFilePath\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\terror)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}, 1000)\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// this.initCanvas()\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tconsole.log('poster onload', option)\r\n\t\t\tthis.isWx = isWxBrowser()\r\n\t\t\tthis.inApp = isApp()\r\n\t\t},\r\n\t\tonReady: function(e) {\r\n\t\t\tconsole.log('poster onready')\r\n\t\t\tthis.getInfo()\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.container {\r\n\r\n\t\t// .nav {\r\n\t\t// \tposition: fixed;\r\n\t\t// \ttop: 0;\r\n\t\t// \tleft: 0;\r\n\t\t// \tdisplay: flex;\r\n\t\t// \talign-items: center;\r\n\t\t// \tjustify-content: center;\r\n\t\t// \twidth: 100%;\r\n\t\t// \theight: 88rpx;\r\n\t\t// \tbackground-color: #0D0D0D;\r\n\t\t// \tz-index: 10;\r\n\r\n\t\t// \t.nav-left {\r\n\t\t// \t\tposition: absolute;\r\n\t\t// \t\ttop: 28rpx;\r\n\t\t// \t\tleft: 28rpx;\r\n\t\t// \t\twidth: 48rpx;\r\n\t\t// \t\theight: 48rpx;\r\n\t\t// \t}\r\n\t\t// }\r\n\r\n\t\t.content {\r\n\r\n\t\t\t.box1 {\r\n\t\t\t\tposition: relative;\r\n\t\t\t\tpadding-top: 80rpx;\r\n\t\t\t\ttext-align: center;\r\n\r\n\t\t\t\t.thecanvas {\r\n\t\t\t\t\tz-index: 1;\r\n\t\t\t\t\twidth: 630rpx;\r\n\t\t\t\t\theight: 774rpx;\r\n\t\t\t\t\tmargin: auto;\r\n\t\t\t\t\tbackground: #E7E7E7;\r\n\t\t\t\t\tborder-radius: 16rpx !important;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.posterImageBase64 {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\tz-index: 2;\r\n\t\t\t\t\ttop: 80rpx;\r\n\t\t\t\t\tleft: 50%;\r\n\t\t\t\t\ttransform: translate(-50%, 0);\r\n\t\t\t\t\twidth: 630rpx;\r\n\t\t\t\t\theight: 774rpx;\r\n\t\t\t\t\tborder-radius: 16rpx !important;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.box2 {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tmargin-top: 24rpx;\r\n\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\t.save {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\tline-height: 0;\r\n\t\t\t\t\twidth: 474rpx;\r\n\t\t\t\t\theight: 96rpx;\r\n\t\t\t\t\tbackground: #D10910;\r\n\t\t\t\t\tborder-radius: 44px;\r\n\t\t\t\t\tcolor: rgba(236, 236, 236, 1);\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\r\n\t\t\t\t\t&:active {\r\n\t\t\t\t\t\tbackground-color: rgba(209, 9, 16, 0.6);\r\n\t\t\t\t\t\tcolor: rgba(134, 134, 134, 1);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.noactive {\r\n\t\t\t\t\t&:active {\r\n\t\t\t\t\t\tbackground-color: #D10910;\r\n\t\t\t\t\t\tcolor: rgba(236, 236, 236, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.box3 {\r\n\t\t\t\tpadding-top: 26rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tcolor: #E6E6E6;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 72rpx;\r\n\t\t\t\t\theight: 72rpx;\r\n\t\t\t\t\tmargin-left: 24rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster1.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster1.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1667350575923\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}